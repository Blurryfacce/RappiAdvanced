<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RappiAdvanced - Sistema de Gesti√≥n</title>
    <link rel="stylesheet" href="./css/styles.css">
</head>

<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-content">
            <a href="#" class="navbar-brand">
                <img src="./images/logo.jpg" alt="Logo" class="navbar-logo">
                RappiAdvanced
            </a>
            <div class="navbar-menu">
                <a href="#inicio" class="nav-link active">Inicio</a>
                <a href="#modulos" class="nav-link">M√≥dulos</a>
                <a href="#contacto" class="nav-link">Contacto</a>
                <a href="login.html" id="loginBtn" class="nav-link">Iniciar sesi√≥n</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="inicio" class="hero-section">
        <div class="logo-container">
            <img src="./images/logo.jpg" alt="RappiAdvanced Logo" class="logo">
        </div>
        <div class="hero-content">
            <h1>RappiAdvanced</h1>
            <p>Sistema integral de gesti√≥n empresarial. Administra productos, proveedores y optimiza tus procesos de
                negocio.</p>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-number">100%</div>
                <div class="stat-label">Confiable</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">24/7</div>
                <div class="stat-label">Disponibilidad</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">4</div>
                <div class="stat-label">M√≥dulos Activos</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">‚àû</div>
                <div class="stat-label">Posibilidades</div>
            </div>
        </div>
    </section>

    <!-- M√≥dulos Section -->
    <section id="modulos" class="modulos-section">
        <div class="container">
            <h2 class="section-title">M√≥dulos del Sistema</h2>
            <p class="section-subtitle">Gestiona tu negocio de forma eficiente con nuestras herramientas especializadas
            </p>

            <div class="modulos-grid">
                <div id="card-productos" class="modulo-card">
                    <img src="./images/paquetes.jpg" alt="Gesti√≥n de Productos" class="modulo-icon">
                    <h3>Productos</h3>
                    <p>Administra tu inventario completo. Registra, actualiza y controla todos tus productos con
                        facilidad.</p>
                    <a href="./productos/productos.html" class="btn btn-primary">Acceder</a>
                </div>

                <div id="card-proveedores" class="modulo-card">
                    <img src="./images/servicio.jpg" alt="Gesti√≥n de Proveedores" class="modulo-icon">
                    <h3>Proveedores</h3>
                    <p>Gestiona tu red de proveedores. Mant√©n actualizada toda la informaci√≥n de contacto y servicios.
                    </p>
                    <a href="./proveedores/proveedores.html" class="btn btn-secondary">Acceder</a>
                </div>

                <div id="card-salidas" class="modulo-card">
                    <img src="./images/entrega.jpg" alt="Salidas de Inventario" class="modulo-icon">
                    <h3>Salidas de Inventario</h3>
                    <p>Registra salidas de productos por ventas, ajustes o devoluciones. Mant√©n el stock actualizado en
                        tiempo real.</p>
                    <a href="./salidas/salidas.html" class="btn btn-primary">Acceder</a>
                </div>

                <div id="card-reportes" class="modulo-card">
                    <img src="./images/paquetes.jpg" alt="Reportes de Ventas" class="modulo-icon">
                    <h3>Reportes de Ingresos</h3>
                    <p>Genera reportes de ingresos totales por rango de fechas. Toma decisiones financieras informadas.
                    </p>
                    <a href="./reportes/reportes.html" class="btn btn-secondary">Acceder</a>
                </div>
            </div>

            <div id="mensaje-publico" style="display: none; text-align: center; padding: 2rem;">
                <p style="font-size: 1.2rem; color: #666;">
                    üîí Para acceder a los m√≥dulos de gesti√≥n, por favor
                    <a href="login.html" style="color: var(--primary); font-weight: bold;">Inicia Sesi√≥n</a>.
                </p>
            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer id="contacto">
        <div class="footer-content">
            <div class="footer-section">
                <h3>RappiAdvanced</h3>
                <p>Sistema de gesti√≥n empresarial dise√±ado para optimizar tus procesos de negocio y mejorar la
                    productividad.</p>
                <div class="social-links">
                    <a href="#" title="Facebook">üìò</a>
                    <a href="#" title="Twitter">üê¶</a>
                    <a href="#" title="LinkedIn">üíº</a>
                    <a href="#" title="Instagram">üì∑</a>
                </div>
            </div>

            <div class="footer-section">
                <h3>Enlaces R√°pidos</h3>
                <p><a href="./productos/productos.html">Gesti√≥n de Productos</a></p>
                <p><a href="./proveedores/proveedores.html">Gesti√≥n de Proveedores</a></p>
                <p><a href="./salidas/salidas.html">Salidas de Inventario</a></p>
                <p><a href="./reportes/reportes.html">Reportes de Ingresos</a></p>
                <p><a href="#inicio">Volver Arriba</a></p>
            </div>

            <div class="footer-section">
                <h3>Contacto</h3>
                <p>üìß contacto@rappiadvanced.com</p>
                <p>üìû +593 99 999 9999</p>
                <p>üìç Quito, Ecuador</p>
                <p>üïê Lun - Vie: 9:00 - 18:00</p>
            </div>

            <div class="footer-section">
                <h3>Equipo de Desarrollo</h3>
                <p>Jhair Zambrano - Backend</p>
                <p>Sergio Rodr√≠guez - Frontend</p>
                <p>Isaac Proa√±o - Frontend</p>
                <p>Daniel Moncayo - QA/PO</p>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 RappiAdvanced. Todos los derechos reservados. | Sprint 1 - Versi√≥n 1.0</p>
        </div>
    </footer>

    <script type="module">
        // Importamos todo lo necesario (incluyendo logoutUser que acabamos de crear)
        import { isLoggedIn, logoutUser, isAdmin } from './js/auth.js';

        // 1. LOGICA DE NAVEGACI√ìN (Smooth Scroll y Navbar)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });

        window.addEventListener('scroll', function () {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) navbar.style.boxShadow = '0 4px 30px rgba(0,0,0,0.15)';
            else navbar.style.boxShadow = '0 2px 20px rgba(0,0,0,0.1)';
        });

        // 2. L√ìGICA DE LOGIN / LOGOUT
        const btn = document.getElementById('loginBtn');
        if (isLoggedIn()) {
            btn.textContent = "Cerrar Sesi√≥n";
            btn.href = "#";
            btn.style.color = "#d32f2f"; // Rojo para indicar salida
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                if (confirm("¬øDeseas cerrar sesi√≥n?")) {
                    logoutUser();
                    window.location.reload();
                }
            });
        }

        // 3. L√ìGICA DE VISIBILIDAD DE M√ìDULOS (SEGURIDAD VISUAL)
        const cardProductos = document.getElementById('card-productos');
        const cardProveedores = document.getElementById('card-proveedores');
        const cardSalidas = document.getElementById('card-salidas');
        const cardReportes = document.getElementById('card-reportes');
        const mensajePublico = document.getElementById('mensaje-publico');

        // Estado inicial: Ocultar todo
        if (cardProductos) cardProductos.style.display = 'none';
        if (cardProveedores) cardProveedores.style.display = 'none';
        if (cardSalidas) cardSalidas.style.display = 'none';
        if (cardReportes) cardReportes.style.display = 'none';

        if (!isLoggedIn()) {
            // CASO A: P√∫blico General -> Mostrar mensaje de bloqueo
            if (mensajePublico) mensajePublico.style.display = 'block';
        } else {
            // CASO B: Usuario Logueado -> Mostrar m√≥dulos b√°sicos
            if (cardProductos) cardProductos.style.display = 'flex';
            if (cardProveedores) cardProveedores.style.display = 'flex';
            if (cardSalidas) cardSalidas.style.display = 'flex';

            // RESTRICCI√ìN POR ROL: Solo Admin ve Reportes
            if (isAdmin()) {
                if (cardReportes) cardReportes.style.display = 'flex';
            }
        }
    </script>

    <script src="./js/dataManager.js" type="module"></script>
</body>
</html>